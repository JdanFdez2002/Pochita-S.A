<div class="card" style="margin-bottom:16px;">
    <h2>Resumen del d√≠a</h2>
    <p style="color: var(--text-muted); margin-bottom: 12px;">Indicadores en tiempo real.</p>
    <div class="inicio-grid">
        <div class="mini-card">
            <small class="muted">Citas de hoy</small>
            <div class="mini-strong">{{ citas_stats.total }}</div>
        </div>
        <div class="mini-card">
            <small class="muted">Pendientes</small>
            <div class="mini-strong" style="color:var(--primary);">{{ citas_stats.pendientes }}</div>
        </div>
        <div class="mini-card">
            <small class="muted">Canceladas</small>
            <div class="mini-strong" style="color:#ef4444;">{{ citas_stats.canceladas }}</div>
        </div>
    </div>
</div>

<div style="display:grid; grid-template-columns: 2fr 1fr; gap:12px; margin-bottom:16px;">
    <div class="card">
        <h2>Citas de hoy</h2>
        <div class="table-responsive">
            <table class="recep-table">
                <thead>
                    <tr>
                        <th>Hora</th>
                        <th>Paciente</th>
                        <th>Cliente</th>
                        <th>Veterinario</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    {% for c in citas_hoy %}
                    <tr>
                        <td>{{ c.hora }}</td>
                        <td>{{ c.mascota.nombre }}</td>
                        <td>{{ c.cliente.perfil.user.get_full_name|default:c.cliente.perfil.user.username }}</td>
                        <td>{{ c.veterinario.perfil.user.get_full_name|default:c.veterinario.perfil.user.username }}</td>
                        <td>{{ c.get_estado_display }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="muted" style="text-align:center;">Sin citas hoy.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="card">
        <h2>Cancelaciones recientes</h2>
        <ul style="margin:8px 0 0; padding-left:16px; color:var(--text-muted); line-height:1.5;">
            {% for c in alertas_canceladas %}
            <li><strong>{{ c.fecha }} {{ c.hora }}</strong> - {{ c.mascota.nombre }} ({{ c.servicio.nombre|default:"Sin servicio" }})<br><small>{{ c.motivo_cancelacion }}</small></li>
            {% empty %}
            <li>No hay cancelaciones recientes.</li>
            {% endfor %}
        </ul>
    </div>
</div>
