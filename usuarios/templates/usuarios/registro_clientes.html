{% extends "core/base.html" %}

{% block title %}Registro Clientes | Pochita S.A{% endblock %}

{% block content %}
<div class="page">
    <section class="hero small-hero">
        <div class="hero-copy">
            <div class="pill">Registro clientes</div>
            <h1>Crea tu cuenta de cliente</h1>
            <p>Registra tus datos para acceder a tu dashboard y gestionar tus servicios.</p>
        </div>
    </section>

    <section class="auth-card">
        <h3>Formulario de registro</h3>
        {% if form.non_field_errors %}
        <div class="form-errors">
            {% for error in form.non_field_errors %}
                <p class="error">{{ error }}</p>
            {% endfor %}
        </div>
        {% endif %}
        <form method="post" class="auth-form" id="registro-clientes">
            {% csrf_token %}
            <div class="form-grid">
                <div class="form-field">
                    <label for="first_name">Nombres</label>
                    <input type="text" id="first_name" name="first_name" class="input" placeholder="Primero Segundo" required>
                    {% if form.first_name.errors %}
                        <p class="error">{{ form.first_name.errors.0 }}</p>
                    {% endif %}
                </div>
                <div class="form-field">
                    <label for="last_name">Apellidos</label>
                    <input type="text" id="last_name" name="last_name" class="input" placeholder="Materno Paterno" required>
                    {% if form.last_name.errors %}
                        <p class="error">{{ form.last_name.errors.0 }}</p>
                    {% endif %}
                </div>
                <div class="form-field">
                    <label for="rut">RUT</label>
                    <input type="text" id="rut" name="rut" class="input" placeholder="12.345.678-9" required>
                    {% if form.rut.errors %}
                        <p class="error">{{ form.rut.errors.0 }}</p>
                    {% endif %}
                </div>
                <div class="form-field">
                    <label for="direccion">Direccion</label>
                    <input type="text" id="direccion" name="direccion" class="input" placeholder="Numero, Calle, Sector, Comuna, Region" required>
                    {% if form.direccion.errors %}
                        <p class="error">{{ form.direccion.errors.0 }}</p>
                    {% endif %}
                </div>
                <div class="form-field">
                    <label for="email">Correo</label>
                    <input type="email" id="email" name="email" class="input" placeholder="correo@ejemplo.com" required>
                    {% if form.email.errors %}
                        <p class="error">{{ form.email.errors.0 }}</p>
                    {% endif %}
                </div>
                <div class="form-field">
                    <label for="telefono">Numero de contacto</label>
                    <input type="tel" id="telefono" name="telefono" class="input" placeholder="+56 9 1234 5678" required>
                    {% if form.telefono.errors %}
                        <p class="error">{{ form.telefono.errors.0 }}</p>
                    {% endif %}
                </div>
                <div class="form-field">
                    <label for="password1">Contrasena</label>
                    <input type="password" id="password1" name="password1" class="input" placeholder="********" required>
                    {% if form.password1.errors %}
                        <p class="error">{{ form.password1.errors.0 }}</p>
                    {% endif %}
                </div>
                <div class="form-field">
                    <label for="password2">Confirmar contrasena</label>
                    <input type="password" id="password2" name="password2" class="input" placeholder="********" required>
                    {% if form.password2.errors %}
                        <p class="error">{{ form.password2.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>
            <div class="form-checks">
                <label class="checkbox">
                    <input type="checkbox" id="acepta_terminos" name="acepta_terminos" required>
                    <span>Acepto terminos y condiciones</span>
                </label>
                <label class="checkbox">
                    <input type="checkbox" id="recibir_noticias" name="recibir_noticias">
                    <span>Deseo recibir noticias a mi correo</span>
                </label>
                {% if form.recibir_noticias.errors %}
                    <p class="error">{{ form.recibir_noticias.errors.0 }}</p>
                {% endif %}
            </div>
            <div class="form-actions">
                <button class="btn btn-primary push-right" type="submit">Crear cuenta</button>
            </div>
        </form>
    </section>
</div>
<script>
(function() {
    const form = document.getElementById("registro-clientes");
    if (!form) return;
    const password = form.querySelector("#password1");
    const confirm = form.querySelector("#password2");
    const validatePasswords = () => {
        if (password.value !== confirm.value) {
            confirm.setCustomValidity("Las contrasenas deben coincidir");
        } else {
            confirm.setCustomValidity("");
        }
    };
    password.addEventListener("input", validatePasswords);
    confirm.addEventListener("input", validatePasswords);
})();
</script>
{% endblock %}
